<!doctype html>
<html>
    <head>
        <title>Academic Layout</title>
        <link
            href="{{ url_for('static', filename='css/academic.css') }}"
            rel="stylesheet"
        />
        <!-- Add KaTeX CSS -->
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css"
        />
    </head>
    <body>
        <div class="d-flex flex-column flex-lg-row">
            <!-- Left Sidebar -->
            <div id="left-sidebar" class="sidebar left-sidebar">
                <div id="root"></div>
            </div>

            <!-- Main Content -->
            <main class="main-content">
                <div class="container-fluid">
                    <div class="row">
                        <!-- Article Content -->
                        <div class="col-lg-9">
                            <div class="article-wrapper">
                                <div id="article-wrapper">
                                    {% if content %} {{ content | safe }} {%
                                    endif %}
                                </div>
                            </div>
                        </div>

                        <!-- Right Sidebar -->
                        <div class="col-md-3">
                            <div class="right-sidebar">
                                <div id="toc-root"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>

        <!-- KaTeX JavaScript -->
        <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>

        <!-- Initialize KaTeX auto-render -->
        <script>
            document.addEventListener("DOMContentLoaded", function () {
                renderMathInElement(
                    document.getElementById("article-wrapper"),
                    {
                        delimiters: [
                            { left: "$$", right: "$$", display: true },
                            { left: "$", right: "$", display: false },
                        ],
                    },
                );
            });
        </script>
    </body>
</html>
