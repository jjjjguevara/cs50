<!-- app/templates/academic.html -->
<!doctype html>
<html>
    <!-- ... head section ... -->
    <body>
        <div class="academic-layout">
            <!-- ... other divs ... -->
        </div>

        <script
            type="module"
            src="{{ url_for('static', filename='dist/academic.js') }}"
        ></script>
        <script>
            import React from "react";
            import ReactDOM from "react-dom/client";
            import MapView from "./components/MapView";

            window.addEventListener("renderMap", (event) => {
                const { mapId } = event.detail;
                const mapContent = document.getElementById("map-content");
                if (mapContent) {
                    // Clear previous content
                    while (mapContent.firstChild) {
                        mapContent.removeChild(mapContent.firstChild);
                    }

                    // Create new React root and render MapView
                    const root = ReactDOM.createRoot(mapContent);
                    root.render(
                        React.createElement(MapView, {
                            mapId: mapId,
                            onSelectTopic: (topicId) => {
                                window.location.href = `/entry/${topicId}`;
                            },
                        }),
                    );
                }
            });
        </script>
    </body>
</html>
